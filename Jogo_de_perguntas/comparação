#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <string.h>

#define TOTAL_PERGUNTAS 20
#define PERGUNTAS_NO_JOGO 10

typedef struct {
    char pergunta[256];
    char opcoes[4][100];
    char correta;
} Pergunta;

int main() {
    Pergunta perguntas[TOTAL_PERGUNTAS] = {
        {"Qual a capital do Brasil?", {"A) São Paulo", "B) Brasília", "C) Rio de Janeiro", "D) Salvador"}, 'B'},
        {"2 + 2 é igual a?", {"A) 3", "B) 5", "C) 4", "D) 2"}, 'C'},
        {"Cor primária?", {"A) Verde", "B) Roxo", "C) Azul", "D) Laranja"}, 'C'},
        {"Maior planeta do sistema solar?", {"A) Terra", "B) Júpiter", "C) Marte", "D) Saturno"}, 'B'},
        {"Quem pintou a Mona Lisa?", {"A) Picasso", "B) Da Vinci", "C) Van Gogh", "D) Michelangelo"}, 'B'},
        {"Velocidade da luz?", {"A) 300 mil km/s", "B) 150 mil km/s", "C) 1 milhão km/s", "D) 500 mil km/s"}, 'A'},
        {"Pai da computação?", {"A) Elon Musk", "B) Alan Turing", "C) Bill Gates", "D) Steve Jobs"}, 'B'},
        {"Ano do descobrimento do Brasil?", {"A) 1492", "B) 1822", "C) 1500", "D) 1600"}, 'C'},
        {"Maior animal terrestre?", {"A) Leão", "B) Elefante", "C) Hipopótamo", "D) Rinoceronte"}, 'B'},
        {"Metal líquido em temperatura ambiente?", {"A) Mercúrio", "B) Ferro", "C) Ouro", "D) Prata"}, 'A'},
        {"Planeta vermelho?", {"A) Marte", "B) Júpiter", "C) Vênus", "D) Terra"}, 'A'},
        {"Maior oceano?", {"A) Atlântico", "B) Índico", "C) Ártico", "D) Pacífico"}, 'D'},
        {"Quantos continentes?", {"A) 5", "B) 6", "C) 7", "D) 8"}, 'C'},
        {"Primeiro presidente do Brasil?", {"A) Getúlio Vargas", "B) Deodoro da Fonseca", "C) Lula", "D) Juscelino"}, 'B'},
        {"Qual o menor país do mundo?", {"A) Mônaco", "B) Vaticano", "C) Andorra", "D) San Marino"}, 'B'},
        {"Elemento químico da água?", {"A) H2O", "B) CO2", "C) NaCl", "D) O2"}, 'A'},
        {"Maior deserto do mundo?", {"A) Saara", "B) Atacama", "C) Antártida", "D) Gobi"}, 'C'},
        {"Qual instrumento mede temperatura?", {"A) Termômetro", "B) Barômetro", "C) Higrômetro", "D) Anemômetro"}, 'A'},
        {"Animal mais rápido do mundo?", {"A) Guepardo", "B) Águia", "C) Tubarão", "D) Cavalo"}, 'A'},
        {"Quem escreveu 'Dom Casmurro'?", {"A) Machado de Assis", "B) José de Alencar", "C) Clarice Lispector", "D) Drummond"}, 'A'}
    };

    int sorteadas[PERGUNTAS_NO_JOGO];
    int erros = 0;
    int erros_indices[PERGUNTAS_NO_JOGO];
    int contador_erros = 0;

    srand(time(NULL));

    // Inicializar sorteadas
    for (int i = 0; i < PERGUNTAS_NO_JOGO; i++) {
        int num;
        int repetido;

        do {
            repetido = 0;
            num = rand() % TOTAL_PERGUNTAS;

            for (int j = 0; j < i; j++) {
                if (sorteadas[j] == num) {
                    repetido = 1;
                    break;
                }
            }
        } while (repetido);

        sorteadas[i] = num;
    }

    // Loop das perguntas
    for (int i = 0; i < PERGUNTAS_NO_JOGO; i++) {
        int idx = sorteadas[i];
        char resposta;

        printf("\nPergunta %d:\n%s\n", i + 1, perguntas[idx].pergunta);
        for (int j = 0; j < 4; j++) {
            printf("%s\n", perguntas[idx].opcoes[j]);
        }

        printf("Sua resposta (A/B/C/D): ");
        scanf(" %c", &resposta);

        if (toupper(resposta) == perguntas[idx].correta) {
            printf("✅ Correto!\n");
        } else {
            printf("❌ Errado! Resposta correta: %c\n", perguntas[idx].correta);
            erros++;
            erros_indices[contador_erros++] = idx;
        }
    }

    // Mostrar resultados
    printf("\n==========================\n");
    printf("Fim do jogo!\n");
    printf("Total de erros: %d\n", erros);

    if (erros > 0) {
        printf("Você errou as seguintes perguntas:\n");
        for (int i = 0; i < contador_erros; i++) {
            int idx = erros_indices[i];
            printf("- %s (Resposta correta: %c)\n", perguntas[idx].pergunta, perguntas[idx].correta);
        }
    } else {
        printf("Parabéns! Você acertou todas!\n");
    }
    printf("==========================\n");

    return 0;
}
